## Извлечение данных из курсора MySQL

Перед тем как разбирать методы `fetch*`, важно понять, **в каком виде курсор возвращает данные**.

---

### 1. Формат данных курсора

### Обычный курсор (по умолчанию)

```python
cursor = connection.cursor()
```

Результат:

```python
(1, 'Moscow', 'RUS', 11500000)
```

* Возвращается `tuple`
* Доступ к данным — **по индексам**
* Зависимость от порядка колонок

---

### Курсор со словарями

```python
cursor = connection.cursor(dictionary=True)
```

Результат:

```python
{
    'ID': 1,
    'Name': 'Moscow',
    'CountryCode': 'RUS',
    'Population': 11500000
}
```

* Возвращается `dict`
* Доступ по именам колонок
* Код становится устойчивым к изменению порядка полей

---

### 2. `fetchone()`

```python
cursor.execute("SELECT * FROM city WHERE ID = %s", (1,))
row = cursor.fetchone()
```

* Возвращает **одну строку**
* Возвращает `None`, если данных нет
* Используется, когда ожидается ровно одна запись

```python
if row:
    print(row['Name'])
```

---

### 3. `fetchall()`

```python
cursor.execute("SELECT * FROM city LIMIT 3")
rows = cursor.fetchall()
```

* Возвращает **список строк**
* Может быть пустым списком
* Подходит для небольших выборок

```python
for row in rows:
    print(row['Name'])
```

---

### 4. `fetchmany(size)`

```python
cursor.execute("SELECT * FROM city")
rows = cursor.fetchmany(5)
```

* Возвращает `size` строк
* Удобно для постраничной обработки
* Меньше потребление памяти

---

### 5. Итерация по курсору

```python
cursor.execute("SELECT * FROM city")

for row in cursor:
    print(row['Name'])
```

* Курсор — **итератор**
* Данные извлекаются построчно
* Лучший вариант для больших таблиц

---

### 6. Когда и что лучше использовать?

```md
| Метод        | Когда использовать                    |
|--------------|--------------------------------------|
| fetchone()   | Ожидается одна строка                |
| fetchall()   | Маленькая выборка                    |
| fetchmany()  | Пакетная обработка                   |
| Итерация     | Большие объёмы данных                |
```

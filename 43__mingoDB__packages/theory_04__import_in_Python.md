## Импорт модулей в Python

### 1. Что такое модуль

* **Модуль** — это любой файл Python с расширением `.py`, содержащий функции, классы и переменные.
* Пример: `math_utils.py`

```python
def add(a, b):
    return a + b
```

* Импорт этого модуля в другом файле позволяет использовать его функции:

```python
import math_utils
print(math_utils.add(2, 3))  # 5
```

---

### 2. Правильное указание пути импорта

* Python ищет модули в **sys.path**:

1. Директория текущего скрипта
2. PYTHONPATH
3. Стандартные библиотеки
4. Установленные пакеты в site-packages

* Пример корректного импорта из подпапки:

```
project/
 ├── main.py
 └── utils/
     └── math_utils.py
```

```python
# main.py
from utils import math_utils
print(math_utils.add(2, 3))
```

* Для сложных вложенных пакетов:

```python
from utils.math_utils import add
```

**Важно:** относительные импорты внутри пакета используют точку:

```python
# utils/__init__.py
# внутри пакета utils
from .math_utils import add  # импорт функции из соседнего модуля
```

* Примеры выше прекрасно работают, если проект запускается через `main.py`
* ⚠️ Но если мы запустим проект через `math_utils.py`, то гарантированно получим `ImportError`
  * (Это ОЧЕНЬ часто требуется для вспомогательных операций. Например — для запуска тестов)

❗[Полезное видео о том, как решать проблемы импорта в проектах](https://www.youtube.com/watch?v=6uWSmqZCz2o)

---

### 3. Компиляция кода при импорте

* При первом импорте Python:

  1. Загружает файл `.py`
  2. Компилирует его в **байткод (.pyc)** в папку `__pycache__`
  3. Выполняет код (инициализация функций, классов, глобальных переменных)
* Последующие импорты берут уже скомпилированный байткод, что ускоряет загрузку.

---

### 4. Что такое пакет (package) и файл `__init__.py`

* **Пакет** — это директория с модулями Python, содержащая **файл `__init__.py`**.
* Пакет позволяет структурировать модули:

```
my_package/
 ├── __init__.py
 ├── module1.py
 └── module2.py
main.py
```

* До Python 3.3 `__init__.py` был обязательным, чтобы Python распознавал директорию как пакет.  
* Сейчас он нужен, если нужно инициализировать пакет или указать, какие подмодули импортировать.

---

### 5. Что даёт указание импорта в `__init__.py`

* В `__init__.py` можно:

  * Импортировать подмодули, чтобы функции модулей были бы доступны сразу же при импорте пакета:

```python
# my_package/__init__.py
from .module1 import func1
from .module2 import func2
```

```python
# main.py
from my_package import func1, func2
```

* Определять `__all__` — список объектов, импортируемых через `from package import *`:

```python
__all__ = ["func1", "func2"]
```

* Выполнять код инициализации при первом импорте пакета.


Таким образом: 
* импорты в `main.py` БЕЗ указания импортов `__init__.py` 
    ```python
    from my_package.module1 import func1
    from my_package.module2 import func2
    ```
* импорты в `main.py` С указанием импортов в  `__init__.py`
    ```python
    from my_package import func1, func2
    ```



